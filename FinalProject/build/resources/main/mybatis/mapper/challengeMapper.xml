<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.boot.mapper.ChallengeMapper">


<select id="maxNum" resultType="int">
	select nvl(max(challengeListNum),0) from challenge
</select>

<insert id="createChallenge" parameterType="com.spring.boot.dto.ChallengeDTO">
    insert into challenge(
challengeListNum,challengeTitle,challengeImageMain,challengeWeekCheck,challengeDateCheck,challengeStartDate,challengeEndDate,challengeImageSuccess,challengeImageFail,challengeLikeCount,challengeContent,challengeMemberCount,challengeCreateDate,challengeStatus) values (
#{challengeListNum},#{challengeTitle},#{challengeImageMain},#{challengeWeekCheck},#{challengeDateCheck},#{challengeStartDate},#{challengeEndDate},#{challengeImageSuccess},#{challengeImageFail},#{challengeLikeCount},#{challengeContent},#{challengeMemberCount},sysdate,1)
</insert>

<insert id="test" parameterType="com.spring.boot.dto.ChallengeDTO">
    insert into challenge(
	challengeStartDate) values (to_char(#{challengeStartDate}))
</insert>


<select id="getReadData" parameterType="int" resultType="com.spring.boot.dto.ChallengeDTO">
	select * from challenge
	where challengeListNum=#{challengeListNum}
</select>

<select id="getChallengeLists" parameterType="hashMap" resultType="com.spring.boot.dto.ChallengeDTO">
	select * from challenge
</select>

<!-- challengeInfo -->
<insert id="insertChallengeInfo" parameterType="com.spring.boot.dto.ChallengeInfoDTO">
    insert into challengeInfo(
	challengeListNum,email,challengeLike,challengeMemberStatus) values (#{challengeListNum},#{email},0,#{challengeMemberStatus})
</insert>

<!-- 총멤버 구하기 -->
<select id="getUserEmailData" parameterType="map" resultType="com.spring.boot.dto.ChallengeInfoDTO">
	select * from challengeinfo
	where email like #{email} and challengelistnum = #{challengelistnum}
</select>

</mapper>