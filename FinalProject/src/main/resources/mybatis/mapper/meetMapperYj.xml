<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.boot.mapper.MeetMapperYj">

<select id="getAllCategories" resultType="com.spring.boot.dto.MeetDTOYj">
    select * from GATCHICATEGORY order by meetctgnum asc
</select>

<select id="getMeetInfo" parameterType="int" resultType="com.spring.boot.dto.MeetDTOYj">
    select * from gatchi where meetlistnum = #{meetlistnum}
</select>

<select id="getReview" parameterType="int" resultType="com.spring.boot.dto.MeetDTOYj">
    select * from MEETREVIEW where meetlistnum = #{meetlistnum}
    order by meetreviewnum desc
</select>

<select id="getMeetMembers" parameterType="int">
    select meetmemid from MEETINFO where meetlistnum = #{meetlistnum} order by meetmemid desc
</select>

<select id="getReviewNum" parameterType="int" resultType="int">
    select nvl(max(meetreviewnum),0) + 1
    from meetreview
    where meetlistnum = #{meetlistnum}
</select>

<insert id="insertMeetReview" parameterType="com.spring.boot.dto.MeetDTOYj">
    insert into MEETREVIEW (meetlistnum, meetreviewnum, meetmemid, meetreviewcontent, meetreviewdate, meetreviewimg)
    values (#{meetlistnum}, #{meetreviewnum}, #{meetmemid}, #{meetreviewcontent}, TO_DATE(#{meetreviewdate}, 'YYYY-MM-DD HH24:MI:SS'), #{meetreviewimg})
</insert>


</mapper>