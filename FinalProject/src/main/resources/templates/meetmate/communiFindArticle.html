<html layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">

<title>ì•„í‹°í´</title>


<style>
    footer{
        position: static !important;
    }
</style>

<link rel="stylesheet" type="text/css" th:href="@{http://localhost:8080/css/index.css}"/>
<link rel="stylesheet" type="text/css" th:href="@{http://localhost:8080/css/meetmate/communiFindArticle.css}"/>
<link rel="icon" type="image/png" th:href="@{http://localhost:8080/image/ë¡œê³ .png}"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
<script src="https://kit.fontawesome.com/1f0cefbb8e.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=83bfuniegk"></script>

<script>

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë²„íŠ¼ ìƒíƒœ ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
        var homeButton = document.querySelector('#btnradio1');
        var reviewButton = document.querySelector('#btnradio2');
        var meetStatus = document.querySelector('#meetStatus').value;  // meetStatusë¥¼ ê°€ì ¸ì˜´

        if (window.location.hash === '#review') {
            // ë¦¬ë·° ë²„íŠ¼ì´ ì„ íƒëœ ìƒíƒœë¡œ ì´ˆê¸°í™”
            reviewButton.checked = true;
            showReviewContent();
        } else {
            // í™ˆ ë²„íŠ¼ì´ ì„ íƒëœ ìƒíƒœë¡œ ì´ˆê¸°í™”
            homeButton.checked = true;
            showHomeContent();
        }

        // ë²„íŠ¼ í´ë¦­ ì‹œ í•´ì‹œ ë³€ê²½
        homeButton.addEventListener('click', function() {
            window.location.hash = '#home';
            showHomeContent();
        });

        reviewButton.addEventListener('click', function() {
        if (meetStatus === "1") {
            alert('í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ëª¨ì„ì…ë‹ˆë‹¤. \n\nâ€»ë¦¬ë·°ëŠ” ëª¨ì„ì´ ì™„ë£Œëœ í›„ ì‘ì„±í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            homeButton.checked = true;
            showHomeContent();
        } else {
            window.location.hash = '#review';
            showReviewContent();
        }
    });
});

    // í™ˆ ë‚´ìš© í‘œì‹œ í•¨ìˆ˜
    function showHomeContent() {
        document.querySelector('#homeAndreviw').classList.remove('reviwAndhome');
        document.querySelector('.yj-img').style.display = 'block';
        document.querySelector('.yj-img2').style.display = 'none';
        document.querySelector('.c-meet-members').style.display = 'block';
        document.querySelector('.meet-mypage').style.display = 'block';
    }

    // ë¦¬ë·° ë‚´ìš© í‘œì‹œ í•¨ìˆ˜
    function showReviewContent() {
        document.querySelector('#homeAndreviw').classList.add('reviwAndhome');
        document.querySelector('.yj-img').style.display = 'none';
        document.querySelector('.yj-img2').style.display = 'block';
        document.querySelector('.c-meet-members').style.display = 'none';
        document.querySelector('.meet-mypage').style.display = 'none';
    }

    // document.addEventListener('DOMContentLoaded', function() {

    //     var joinButton = document.querySelector('.join-button');
        
    //         joinButton.addEventListener('click', function() {
    //         alert('ê°€ì… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    //         });
    // });

    // document.addEventListener('DOMContentLoaded', function() {

    //     var outButton = document.querySelector('.out-button');
        
    //     outButton.addEventListener('click', function() {
    //         alert('ëª¨ì„ì„ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?');
    //         });
    // });

    // document.addEventListener('DOMContentLoaded', function() {

    //     var deleteButton = document.querySelector('.delete-button');
        
    //     deleteButton.addEventListener('click', function() {
    //         alert('ëª¨ì„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
    //         });
    // });

    document.addEventListener('DOMContentLoaded', function() {

        var reviewForm = document.querySelector('.review-form');
        var reviewWriteButton = document.querySelector('.review-write');
        if(reviewWriteButton != null){
            reviewWriteButton.addEventListener('click', function() {
                if (reviewForm.style.display === 'block') {
                    reviewForm.style.display = 'none';
                } else {
                    reviewForm.style.display = 'block';
                }
                
            });
        }
        document.querySelector('#submit-review').addEventListener('click', function(e) {
        e.preventDefault(); // ê¸°ë³¸ ì´ë²¤íŠ¸ ë™ì‘ ë°©ì§€ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë°©ì§€)

            var meetListNum = document.querySelector('#meet-listnum').value;
            var reviewContent = document.querySelector('#review-content').value;
            reviewContent = reviewContent.replace(/\n/g, '\n');
            var reviewImage = document.querySelector('#review-image').files[0];

            // ë¦¬ë·° ë‚´ìš©ê³¼ ì´ë¯¸ì§€ ëª¨ë‘ í•„ìˆ˜ë¡œ ì…ë ¥ë˜ì–´ì•¼ í•¨
            if (reviewContent.trim() === '' && !reviewImage) {
                alert('ë‚´ìš©ê³¼ ì´ë¯¸ì§€ë¥¼ ëª¨ë‘ ì‘ì„±í•´ì£¼ì„¸ìš”.');
            } else if (!reviewImage) {
                alert('ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•´ì£¼ì„¸ìš”.');
            } else if (reviewContent.trim() === '') {
                alert('ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
            } else {
                // ì´ë¯¸ì§€ íŒŒì¼ì„ FormDataì— ì¶”ê°€
                var formData = new FormData();
                formData.append('meetListNum', meetListNum);
                formData.append('meetReviewContent', reviewContent);
                formData.append('meetReviewImg', reviewImage);

                $.ajax({
                    url: '/upload-review',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        if (response === 'success') {
                            alert('ë¦¬ë·°ê°€ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.');
                            document.querySelector('#review-content').value = '';
                            document.querySelector('#review-image').value = ''; // ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                            window.location.reload();

                        } else if (response === 'already-reviewed') {
                            alert('ì´ë¯¸ ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤.');
                            window.location.reload();
                        }
                    },
                    error: function(xhr, status, error) {
                        alert('ì˜¤ë¥˜ ë°œìƒ: ' + status);
                    }
                });

            }
        });


        
    });

    // ëª¨ë‹¬ ì°½ ì—´ê¸°
    function openModal(imgElement) {

        var modal = document.createElement('div');
        modal.className = 'modal';
        
        var modalImg = document.createElement('img');
        modalImg.className = 'modal-content';
        modalImg.src = imgElement.src;
        
        modal.appendChild(modalImg);
        modal.style.display = 'block';
        
        document.body.appendChild(modal);
        
        modal.onclick = function() {
            modal.style.display = 'none';
            modal.remove();
        };
    }

    function deleteReview(email, meetListNum, meetReviewNum) {
        if (confirm('ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            $.ajax({
                type: "POST",
                url: "/delete-review",
                data: {
                    meetListNum: meetListNum,
                    meetReviewNum: meetReviewNum,
                    email: email
                },
                success: function (response) {
                    alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    location.reload();
                },
                error: function () {
                    alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            });
        }
    }

    

     // ì¸ì›ìˆ˜ ë‹¬ì„±ë¥  ê³„ì‚° ë° ê·¸ë˜í”„ ìƒíƒœ ì—…ë°ì´íŠ¸
    $(document).ready(function() {
        $('#countdown-wrap').each(function() {
            var currentAmount = parseInt($(this).find('#current-amount').text());
            var maxAmount = parseInt($(this).find('#max-amount').text());

            var percentage = Math.floor((currentAmount / maxAmount) * 100);
            
            var progressBar = $(this).find('#progress');
            progressBar.css('width', percentage + '%');
            progressBar.css('background-color', '#00824a');

            var percentElement = $(this).find('#goal');
            percentElement.text(percentage + "%");
        });
    });

    // í¼ì¹˜ê¸° ê¸°ëŠ¥
    $(document).ready(function() {
        $("#expand-button").click(function() {
            $("#expandable-content").toggle();
            $("#request-text").toggle();

            if ($("#expand-button").text() === "â…´í¼ì¹˜ê¸°") {
                $("#expand-button").text("â…´ì ‘ê¸°");
            } else {
                $("#expand-button").text("â…´í¼ì¹˜ê¸°");
            }
        });
    });

    // íšŒì› ê°œë³„ì„ íƒ
    function toggleAccept(element) {
        if (element.classList.contains('accepted')) {
            element.classList.remove('accepted');
            element.style.color = '';
        } else {
            element.classList.add('accepted');
            element.style.color = '#e9194d';
        }
    }

    // íšŒì› ì „ì²´ì„ íƒ
    function toggleAll() {
        var elements = document.querySelectorAll('.approval-action');
        var selectAll = true;

        elements.forEach(function(element) {
            if (!element.classList.contains('accepted')) {
                selectAll = false;
                element.classList.add('accepted');
                element.style.color = '#e9194d';
            }
        });

        if (selectAll) {
            elements.forEach(function(element) {
                element.classList.remove('accepted');
                element.style.color = '';
            });
        }

        // "ì „ì²´ì„ íƒ" í…ìŠ¤íŠ¸ë¥¼ "ì „ì²´í•´ì œ"ë¡œ ë³€ê²½
        var selectAllText = document.querySelector('.approval-mem-back div[onclick="toggleAll()"]');
        if (selectAllText) {
            selectAllText.textContent = selectAll ? 'ì „ì²´ì„ íƒ' : 'ì „ì²´í•´ì œ';
        }
    }
    
    function sendRequest() {
    var meetListNum = $('#meet-listnum').val();
    var selectedMembers = $('.approval-action.accepted');
    var selectedEmails = [];
    
    selectedMembers.each(function(index, element) {
        selectedEmails.push($(element).data('email'));
    });

    if (selectedEmails.length > 0) {
        var confirmation = confirm('ì„ íƒí•œ íšŒì›ì—ê²Œ ìš”ì²­ì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?');

        if (confirmation) {
            // JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ 'emails' ë§¤ê°œë³€ìˆ˜ì— ì „ë‹¬
            $.ajax({
                type: "POST",
                url: "/send-request",
                data: {
                    meetListNum: meetListNum,
                    emails: JSON.stringify(selectedEmails)
                },

                    success: function(response) {
                        alert('ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
                        location.reload();
                    },
                    error: function(xhr, status, error) {
                        alert('ìš”ì²­ ì „ì†¡ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error);
                    }
                });
            }
        } else {
            alert('ì„ íƒí•œ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤');
        }
    }

    function reqApproval(email, meetListNum) {
        if (confirm('ìš”ì²­ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            $.ajax({
                type: "POST",
                url: "/req-approval",
                data: {
                    meetListNum: meetListNum,
                    email: email
                },
                success: function (response) {
                    alert('ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    location.reload();
                },
                error: function () {
                    alert('ìŠ¹ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            });
        }
    }

  


    function reqReject(email, meetListNum) {
        if (confirm('ìš”ì²­ì„ ê¸°ê°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            $.ajax({
                type: "POST",
                url: "/req-reject",
                data: {
                    meetListNum: meetListNum,
                    email: email
                },
                success: function (response) {
                    alert('ê¸°ê°ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    location.reload();
                },
                error: function () {
                    alert('ê¸°ê°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            });
        }
    }
    
    
function joinMeet(){

let title = document.getElementById('meetTitle').textContent;

let checkJoin = confirm(title + ' ëª¨ì„ì— ê°€ì…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');

let meetListNum = document.getElementById('meetListNum').value;
if(checkJoin){
    $.ajax({
            type: "POST",
            url: "/checkuserpoint",
            data: {
                meetListNum: meetListNum
            },
            success: function (response) {
                alert(response);
                if(response){
                    location.href = '/join-meet?meetListNum='+meetListNum;
                }else{
                    alert('í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.');
                }
            },
            error: function () {
                alert('ë‹¤ì‹œ ì‹œë„ í•´ì£¼ì„¸ìš”..');
            }
        });
}
}

function joinCancel(){
let meetListNum = document.getElementById('meetListNum').value;
let title = document.getElementById('meetTitle').textContent;

let joincancel = confirm(title + ' ëª¨ì„ì˜ ê°€ì…ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
if(joincancel){
    $.ajax({
            type: "POST",
            url: "/joincancel",
            data: {
                meetListNum: meetListNum
            },
            success: function (response) {
                if(response){
                    location.href = '/meetArticle.action?meetListNum='+meetListNum;
                }else{
                    alert('ì´ë¯¸ ê°€ì…ë˜ì…¨ìŠµë‹ˆë‹¤...');
                }
            },
            error: function () {
                alert('ë‹¤ì‹œ ì‹œë„ í•´ì£¼ì„¸ìš”..');
            }
        });
}
}

function deleteMeet() {
let meetListNum = document.getElementById('meetListNum').value;
let title = document.getElementById('meetTitle').textContent;

let joincancel = confirm(title + ' ëª¨ì„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
if(joincancel){
    alert('ì‚­ì œ ë˜ì—ˆìŠµë‹ˆë‹¤.');
    location.href = '/delete-meet?meetListNum='+meetListNum;
}
}

function outmeet(){
    let meetListNum = document.getElementById('meetListNum').value;
    let title = document.getElementById('meetTitle').textContent;

    let joincancel = confirm(title + ' ëª¨ì„ì„ íƒˆí‡´ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
    if(joincancel){
        alert('íƒˆí‡´ ë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.href = '/out-meet?meetListNum='+meetListNum;
    }
}

function testMeet() {
let meetListNum = document.getElementById('meetListNum').value;
let reqMoney = confirm(title + ' ëª¨ì„ ì •ì‚°ì„ ë©¤ë²„ë“¤ì—ê²Œ ìš”ì²­í• ê¹Œìš”?');

if(reqMoney){
    $.ajax({
            type: "POST",
            url: "/meetMoneyReq",
            data: {
                meetListNum: meetListNum
            },
            success: function (response) {
                if(response == 1){
                    alert('ë©¤ë²„ë“¤ì—ê²Œ ì •ì‚°ìš”ì²­ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.');
                    location.href = '/articleYj.action?meetListNum='+meetListNum;
                }else if(response === 2){
                    alert('....');
                }
                else{
                    alert('ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”..');
                }
            },
            error: function () {
                alert('ì•Œìˆ˜ì—†ëŠ” ì—ëŸ¬ ì…ë‹ˆë‹¤.. ê³ ê°ì„¼í„°ì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”');
            }
        });

}
}

//íˆ´íŒ
function showTooltip() {
    var tooltip = document.getElementById('tooltip');
    tooltip.style.display = 'block';
    tooltip.style.top = '525px';
    tooltip.style.width = '305px'
}
function hideTooltip() {
    var tooltip = document.getElementById('tooltip');
    tooltip.style.display = 'none';
}

function chatRoom(){
    let meetListNum = document.getElementById('meetListNum').value;

    var options = 'width=600px,height=700px,scrollbars=yes'
            popupChat = window.open("articleChatRoom.action?meetListNum=" + meetListNum,"_blacnk",options);
}

setInterval(checkNotReadMessage, 500);

function checkNotReadMessage(){

    let user = {'userId': "article"};

    let requestOption = {
        method:'POST',
        headers:{
            'Content-Type':'application/json',
        },
        body:JSON.stringify(user)
    };

    fetch('/chat/checkNotReadMessage', requestOption)
      .then(response => response.json())
      .then(data => {
        // ê°€ì ¸ì˜¨ ìˆ«ìë¥¼ í™”ë©´ì— í‘œì‹œ
        //console.log("ë°ì´íƒ€ : " + JSON.stringify(data));
        console.log("checkNotReadMessage : " + JSON.stringify(data));
        roomsNotReadMessage(data);
      })
      .catch(error => {
        console.error('ìˆ«ì ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
      });
}

function roomsNotReadMessage(data){
    let rooms = document.getElementsByName("room");
    let notReadCountObject = data.notReadCount;
    let notReadCountKeys = Object.keys(notReadCountObject);
    let notReadCountSize = notReadCountKeys.length;

    // console.log("í¬ê¸° : " + notReadCountSize);
    // console.log(rooms[0].getAttribute('data-value'));
    // console.log("ìœ„ì‰ : " + notReadCountKeys);

    for(let i=0; i<notReadCountSize; i++){
        for(let j=0; j<rooms.length; j++){
            let roomId = rooms[j].getAttribute('data-value');
            let notReadCountValue = notReadCountObject[roomId];
            if(notReadCountValue <= 0){
                rooms[j].textContent = "";
                continue;
            }
            rooms[j].textContent = notReadCountValue;
        }
    }
}

</script>

</head>
<body>

<div layout:fragment="content">






    

    <div class="text-center">
        <div class="btn-group" id="homeAndreviw" role="group" aria-label="Basic radio toggle button group">
            <!-- í™ˆ ë²„íŠ¼ -->
            <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
            <label class="btn btn-custom" for="btnradio1">
                <span style="color: #383535; font-size: 20px;">í™ˆ</span>
                <div class="underline"></div>
            </label>
            <!-- ë¦¬ë·° ë²„íŠ¼ -->
            <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
            <label class="btn btn-custom" for="btnradio2">
                <span style="color: #383535; font-size: 20px;">ë¦¬ë·°</span>
                <div class="underline"></div>
            </label>
            <input type="hidden" id="meetStatus" th:value="${meetStatus}">
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-end homeaticle">
            <div class="col-md-2" id="mypage">
                <div class="meet-mypage">
                    <div class="meetName-back">
                        <div class="meetName" th:text="${meetListInfo.meetName}"></div>
                    </div>
                    <div class="badge communiFind" th:text="${meetListInfo.meetCheck == 1 ? 'meetMate' : 'communiFind'}"></div>
                    <div class="badge meetHow" th:text="${meetListInfo.meetHow == 1 ? 'ì„ ì°©ìˆœ' : 'ìŠ¹ì¸ì œ'}"></div>
                    <div class="badge primary" th:text="${meetCategory[meetListInfo.meetCtgNum - 1].meetCtgName}"></div>

                    <div class="user-info-container">
                            <div class="round-image-login" th:if="${#httpSession.getAttribute('user') != null}">
                                <img th:src="@{${session.user.picture}}">
                            </div>
                            <div class="round-image-login" th:if="${#httpSession.getAttribute('user1') != null}">
                                <img th:src="@{image/login/__${session.user1.picture}__}">
                            </div>
                        <div class="login-user-email" th:if="${#httpSession.getAttribute('user1') != null}" 
                        th:text="|${session.user1.name}"></div>
                        <div class="login-user-email" th:if="${#httpSession.getAttribute('user') != null}" 
                        th:text="|${session.user.name}"></div>
                        <div style="font-size: 17px; margin-top: 3px;">ë‹˜</div>
                        <div th:if="${meetMemStatus == 1}" style="margin-left: 30px; color: #adadad; font-size: 17px;">ğŸ‘‘</div>
                        <div th:if="${meetMemStatus == 1}" style="margin-left: 2px; color: #adadad; font-size: 17px; margin-top: 3px;">ë°©ì¥</div>
                        <div th:if="${meetMemStatus == 2}" style="margin-left: 30px; color: #adadad; font-size: 17px; margin-top: 3px;">ğŸ¤—</div>
                        <div th:if="${meetMemStatus == 2}" style="margin-left: 2px; color: #adadad; font-size: 17px; margin-top: 3px;">íšŒì›</div>
                        <div th:if="${meetMemStatus == 0}" style="margin-left: 30px; color: #adadad; font-size: 17px;">âŒ›</div>
                        <div th:if="${meetMemStatus == 0}" style="margin-left: 2px; color: #adadad; font-size: 17px; margin-top: 3px;">ìŠ¹ì¸ëŒ€ê¸°ì¤‘..</div>
                        <div th:if="${meetMemStatus < 0}" style="margin-left: 30px; color: #adadad; font-size: 17px; margin-top: 3px;">ğŸ‘¤</div>
                        <div th:if="${meetMemStatus < 0}" style="margin-left: 2px; color: #adadad; font-size: 17px; margin-top: 3px;">ì†ë‹˜</div>
                    </div>

                    <hr/>

                    <div id="countdown-wrap" th:each="meetListInfo : ${meetListInfo}">
                        <div id="goal"></div>
                        <div id="glass">
                            <div id="progress">
                            </div>
                        </div>
                        <div class="goal-stat">
                            <span class="goal-number" id="current-amount" th:text="${meetListInfo.meetMemCnt}"></span>
                            <span class="goal-label">í˜„ì¬ ì¸ì›</span>
                        </div>
                        <div class="goal-stat" style="margin-left: 160px; text-align: right;">
                            <span class="goal-number" id="max-amount" th:text="${meetListInfo.meetMaxMemCnt}"></span>
                            <span class="goal-label">ëª¨ì§‘ ì¸ì›</span>
                        </div>
                    </div>

                    <button class="chat-btn" th:if="${meetMemStatus == 1 or meetMemStatus == 2}" id="chatRoom" onclick="chatRoom()">
                        <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Speech%20Balloon.png" alt="Speech Balloon" width="25px" height="25px" /> ì±„íŒ… ë°”ë¡œê°€ê¸°
                        <span class="notreadcount" name="room" th:attr="data-value=${roomId}">
                            
                        </span>
                        <input type="hidden" id="meet-memStatus" name="meetMemStatus" th:value="${meetMemStatus}" />
                    </button>
                      
                </div>
            </div>

            <div class="col-8 mx-2 fixed-width-col" th:each="meetListInfo : ${meetListInfo}">
                <div class="yj-img">
                    <img th:src="@{${'/image/gatchiImage/' + meetListInfo.meetImage}}" alt="në²ˆë°©ì˜ ëŒ€í‘œì‚¬ì§„">
                    <div class="Main_content" >
                        <div class="round-image">
                            <img th:src="@{|/image/login/${meetMaster.picture}|}" alt="ë°©ì¥í”„ì‚¬"/>
                        </div>
                        <div class="Yj-master" th:each="meetMaster : ${meetMaster}" th:text="${meetMaster.name}"></div>
                        <p class="Yj-title" id="meetTitle" th:text="${meetListInfo.meetTitle}"></p>
                        <div class="centered-content">
                            <div class="like-hitCount">
                                <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Beating%20Heart.png" alt="Beating Heart" style="width: 30px; height: 30px;"/>
                                <div style="color: #383535; font-size: 17px;">ì¢‹ì•„ìš”
                                    <span style="color: #00824a; font-weight: bold;" th:text="${meetListInfo.meetLikeCount}">
                                    </span>
                                </div>
                            </div>
                        
                            <div class="like-hitCount">
                                <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Smilies/Eye%20in%20Speech%20Bubble.png" alt="Eye in Speech Bubble" style="width: 30px; height: 30px;"/>
                                <div style="color: #383535; font-size: 17px;">ì¡°íšŒìˆ˜
                                    <span style="color: #00824a; font-weight: bold;" th:text="${meetListInfo.meetHitCount}">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    
                    <div class="main-text">


                        <div style="width: 750px; height: 600px; background-color:#ffffff; margin: 0 auto 0 -2px; text-align: center;">
                            <h3>ëª¨ì„ ì¥ì†Œ</h3>
                            <div id="map" style="width:100%; height:500px;"></div>
                          </div>

                        
                        <input type="hidden" id="lat" name="lat" th:value="${mapDto.lat}"/>
                        <input type="hidden" id="lng" name="lng" th:value="${mapDto.lng}"/>

                        <div class="c-intro">ëª¨ì„ ì†Œê°œ</div>
                        <p class="Yj-text1" th:utext="${meetListInfo.meetContent.replaceAll('\n', '<br>')}"></p>


                        <div class="c-info">ìƒì„¸ ì •ë³´</div>
                        <p class="text-with-hyphen Yj-text2" th:text="${meetListInfo.meetPlace}"></p>

                        <div class="c-inwon">ëª¨ì§‘ ì¸ì›</div>
                        <div class="text-container">
                            <p class="Yj-text3" th:text="${meetListInfo.meetMemCnt}"></p>/
                            <p class="Yj-text3" th:text="${meetListInfo.meetMaxMemCnt}"></p>
                        </div>

                        <form th:if="${meetMemStatus < 0} and ${meetStatus == 1} and ${meetListInfo.meetMemCnt<meetListInfo.meetMaxMemCnt}">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button form="joinForm" type="button" class="c-join-button" onclick="joinMeet()">
                               ê°€ì…í•˜ê¸°
                            </button>
                        </form>
                        <form th:with="meetMemStatus=${meetMemStatus}" th:if="${meetMemStatus == 0}">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="c-join-button" onclick="joinCancel()">
                               ê°€ì…ì·¨ì†Œ
                            </button>
                        </form>

                        <th:block th:if="${(meetListInfo.meetMemCnt >= meetListInfo.meetMaxMemCnt) and meetStatus == 1 and (meetMemStatus <0)}">
                            <p style="font-size: 18px; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì •ì› ì´ˆê³¼ë¡œ ì¸í•´ í˜„ì¬ ê°€ì… ì‹ ì²­ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                        </th:block>
                        
                        <th:block th:if="${meetStatus == 2}">
                            <p style="font-size: 18px; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì´ë¯¸ ì¢…ë£Œëœ ëª¨ì„ì…ë‹ˆë‹¤.</p>
                        </th:block>
                        <form id="joinForm" method="post">
                            <input type="hidden" name="meetListNum" id="meetListNum" th:value="${meetListNum}"/>
                        </form>

                        <form th:if="${meetMemStatus == 2} and ${meetStatus == 1}">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button form="outForm" type="button" class="c-out-button" onclick="outmeet()">
                                ëª¨ì„ ë‚˜ê°€ê¸°
                            </button>
                        </form>
                        
                        <form id="outForm" method="post">
                            <input type="hidden" name="meetListNum" th:value="${meetListNum}"/>
                            <input type="hidden" name="email" th:value="${dto.email}"/>
                        </form>
                        
                        <form th:with="meetMemStatus=${meetMemStatus}" th:if="${meetMemStatus == 1} and ${meetStatus == 1}">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button form="deleteForm" type="button" class="c-delete-button" onclick="deleteMeet()">
                                ëª¨ì„ ì‚­ì œ
                            </button>
                        </form>
                        
                        <form id="deleteForm" method="post">
                            <input type="hidden" name="meetListNum" th:value="${meetListNum}"/>
                        </form>
                        <th:block th:if="${meetStatus == 1 and meetMemStatus == 0}">
                            <p style="font-size: 18px; color: rgb(0, 68, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ê°€ì… ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.</p>
                        </th:block>
                    </div>
                </div>
            </div>

            <div class="col-md-2">
                <div class="c-meet-members">
                    <p style="margin-top: 10px; margin-bottom: 5px;">
                        <span style="margin-left: 12px; font-size: 17px;">ë©¤ë²„ëª©ë¡</span>
                        <span th:each="meetListInfo : ${meetListInfo}" style="margin-left: 5px; color: #5CA8B5; font-size: 17px; font-weight: bold;" th:text="${meetListInfo.meetMemCnt}"></span>
                        <span style="margin-right: 82px; color: #5CA8B5; font-size: 17px; font-weight: bold;">ëª…</span>
                        <a th:if="${meetMemStatus == 1}" th:href="@{'/meetManager.action?meetListNum=' + ${meetListInfo.meetListNum}}" style="text-decoration: none;">
                            <span style="color: #adadad; font-size: 17px;">ê´€ë¦¬</span>
                            <i class="fa-solid fa-gear" style="color: #c3c3c3; font-size: 13px;"></i>
                        </a>
                    </p>

                    <div div class="meet-mem-back" >
                        <div class="meet-mem-list" th:each="meetMember : ${meetMembers}">
                            <li class="round-image-user mt-2" style="margin-right: 10px; margin-left: -10px;">
                                <img th:if="${meetMember.role == 'GUEST'}" th:src="@{${meetMember.picture}}">
                                <img th:if="${meetMember.role != 'GUEST'}" th:src="@{image/login/__${meetMember.picture}__}">
                            </li>
                            <li class="custom-li" th:text="${meetMember.name}"></li>
                        </div>
                    </div>
                    <hr style="width: 225px; border-width: 2px; border-color: #84A5FF;">
             
                    <p style="font-size: 17px; margin-right: 10px;">meetMate ëª©ë¡</p>
                    <div class="meetmate-back">
                        <div th:if="${#lists.size(onlyMeetListInfo) > 0}">
                            <div class="meet-title-list" th:each="onlyMeetListInfo : ${onlyMeetListInfo}">
                                <a class="pretty-link" th:href="@{'/meetArticle.action?meetListNum=' + ${onlyMeetListInfo.meetListNum}}">
                                    <div class="pretty-link-content">
                                        <div class="only-meetTitle" th:text="${onlyMeetListInfo.meetTitle}"></div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div th:if="${#lists.size(onlyMeetListInfo) == 0}">
                            <p style="margin-top: 79px; font-size: 16px;">ìƒì„±ëœ meetMateê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                    
                    <form action="/communiFindGatchiChoice.action" method="GET">
                        <input type="hidden" name="meetListNum" id="meetListNum" th:value="${meetListNum}"/>
                        <button type="submit" class="meetmate-btn" th:if="${meetMemStatus == 1} and ${meetListInfo.meetStatus == 1}">meetMate ìƒì„±í•˜ê¸°</button>
                    </form>

                    <div class="only-communifind" th:if="${meetMemStatus <= 0 or meetMemStatus == 2}" onmouseover="showTooltip()" onmouseout="hideTooltip()">
                        <i class="fa-solid fa-circle-info fa-lg" style="color: #c0ddff;"></i>
                    </div>
                    <div id="tooltip" style="display: none; position: absolute; background: #fff; border: 1px solid #ccc; padding: 10px; z-index: 999;">
                        communiFind ë‚´ì˜ meetMateì— ì°¸ì—¬í•˜ì‹¤ ê²½ìš° í•´ë‹¹ communiFind ê°€ì… ë¨¼ì € í•´ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.
                    </div>

                </div>
            </div>
        </div>
    </div>
    
    <div class="yj-img2">
        <div class="review-title">REVIEW</div>
        <div class="review-sub">ì´ ëª¨ì„ ìœ ì €ì˜ ìƒìƒí•œ í›„ê¸°ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”!</div>
        <div class="review-write" th:if="${meetStatus == 2 and (meetMemStatus == 1 or meetMemStatus == 2)}">ì‘ì„±í•˜ê¸°</div>
        <form action="/upload-review" method="POST" enctype="multipart/form-data">
            <div class="review-form" style="display: none;">
                <div class="review-input">
                    <textarea name="meetReviewContent" id="review-content" placeholder=" ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
                    <input type="file" name="meetReviewImg" id="review-image" accept="image/*">
                    <input type="hidden" id="meet-listnum" name="meetListNum" th:value="${meetListNum}" />
                    <button id="submit-review">ë“±ë¡í•˜ê¸°</button>
                </div>
            </div>
        </form>

        <th:block th:if="${#lists.isEmpty(meetReview)}">
            <div class="no-review">
                ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
        </th:block>

        <th:block th:unless="${#lists.isEmpty(meetReview)}">
            <div class="d-flex justify-content-center mb-4" th:each="meetReview : ${meetReview}">
                <div class="card" style="width: 36rem; margin-bottom: 20px; border:none;">
                    <div class="card-body">
                        <div class="d-flex flex-column mb-2">
                            <div class="round-image-user mt-2">
                                <img th:if="${meetReview.role == 'GUEST'}" th:src="@{${meetReview.picture}}">
                                <img th:if="${meetReview.role != 'GUEST'}" th:src="@{image/login/__${meetReview.picture}__}">
                            </div>
                            <p class="memid" th:text="${meetReview.name}"></p>
                            <div class="col-md-4 mx-auto" style="width: 300px; height: 300px; overflow: hidden; border-radius: 5px; margin-bottom: 10px; margin-top: 10px;">
                                <img th:src="@{${'/image/reviewImage/' + meetReview.meetReviewImg}}" class="img-fluid rounded-start" alt="ë¦¬ë·°ì‚¬ì§„" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="openModal(this);">
                            </div>
                        </div>
                        
                        <p class="card-text" th:utext="${meetReview.meetReviewContent.replaceAll('\n', '<br>')}" style="padding-left: 10px; padding-right: 10px; text-align: justify; font-size: 18px; margin-bottom: 5px; line-height: 22px;"></p>
                        <p class="card-text d-flex" th:text="${#strings.substring(meetReview.meetReviewDate, 0, 16)}" style="color: #AAAAAA; font-size: 13px; position: absolute; top: 0; right: 0; margin-top: 31px; margin-right: 20px;"></p>

                        <span class="card-text d-flex delete-review" th:if="${#httpSession.getAttribute('user1') != null} and ${session.user1.email == meetReview.email}" th:data-email="${meetReview.email}" th:data-meetListNum="${meetListNum}" th:data-meetReviewNum="${meetReview.meetReviewNum}" onclick="deleteReview(this.getAttribute('data-email'), this.getAttribute('data-meetListNum'), this.getAttribute('data-meetReviewNum'))">ì‚­ì œ</span>
                        <span class="card-text d-flex delete-review" th:if="${#httpSession.getAttribute('user') != null} and ${session.user.email == meetReview.email}" th:data-email="${meetReview.email}" th:data-meetListNum="${meetListNum}" th:data-meetReviewNum="${meetReview.meetReviewNum}" onclick="deleteReview(this.getAttribute('data-email'), this.getAttribute('data-meetListNum'), this.getAttribute('data-meetReviewNum'))">ì‚­ì œ</span>
                    </div>
                </div>
            </div>
        </th:block>
    </div>


   
      
    <script id="code">

        var lat = document.getElementById("lat").value;
        var lng = document.getElementById("lng").value;
    
        var HOME_PATH = window.HOME_PATH || '.';
        var position = new naver.maps.LatLng(lat, lng);
        
        var map = new naver.maps.Map('map', {
        center: position, //ì§€ë„ì˜ ì´ˆê¸° ì¤‘ì‹¬ ì¢Œí‘œ
        zoom: 18, //ì§€ë„ì˜ ì´ˆê¸° ì¤Œ ë ˆë²¨
      
    
    });
    
    var markerOptions = {
    position: position.destinationPoint(0, 0),
    map: map,
    icon: {
        url: HOME_PATH+'/image/map/marker-nowLocation.png',
        
        origin: new naver.maps.Point(0, 0),
        anchor: new naver.maps.Point(25, 26)
    }
    };
    var marker = new naver.maps.Marker(markerOptions);
    
    </script>


        
</div>

</body>
</html>